"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = exports.VXETablePluginRenderer = void 0;

var _ctor = _interopRequireDefault(require("xe-utils/ctor"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

/* eslint-enable no-unused-vars */
var defaultLineColors = ['#C23531', '#2F4554', '#006699', '#D48265', '#FFDB5C', '#91C7AE', '#BDA29A', '#797B7F'];

function createProgressBarVNs(h, params, renderOptList) {
  var row = params.row,
      column = params.column;
  var cellValue = row[column.property];

  if (!_ctor["default"].isArray(cellValue)) {
    cellValue = [cellValue];
  }

  return renderOptList.map(function (renderOpts, index) {
    var _renderOpts$props = renderOpts.props,
        props = _renderOpts$props === void 0 ? {} : _renderOpts$props;
    var margin = props.margin,
        lineWidth = props.lineWidth,
        lineColor = props.lineColor,
        lineBgColor = props.lineBgColor;
    var progressValue = Math.min(100, _ctor["default"].toNumber(cellValue[index]));
    var barMargin = _ctor["default"].isNumber(margin) ? "".concat(margin, "px") : margin;
    var barHeight = _ctor["default"].isNumber(lineWidth) ? "".concat(lineWidth, "px") : lineWidth;
    var labelPosition;

    if (progressValue < 30) {
      labelPosition = 'outer';
    } else if (progressValue > 70) {
      labelPosition = 'inner';
    }

    return h('span', {
      "class": ['vxe-renderer--progress-bar', _defineProperty({}, "label--".concat(labelPosition), labelPosition)],
      style: {
        margin: barMargin,
        height: barHeight,
        lineHeight: barHeight,
        backgroundColor: lineBgColor
      }
    }, [h('span', {
      "class": 'vxe-renderer--progress-bar-chart',
      style: {
        width: "".concat(progressValue, "%"),
        backgroundColor: lineColor || defaultLineColors[index]
      }
    }), h('span', {
      "class": 'vxe-renderer--progress-bar-label'
    }, "".concat(progressValue, "%"))]);
  });
}

function createProgressRingVNs(h, params, renderOptList) {
  var row = params.row,
      column = params.column;
  var cellValue = row[column.property];

  if (!_ctor["default"].isArray(cellValue)) {
    cellValue = [cellValue];
  }

  return renderOptList.map(function (renderOpts, index) {
    var _renderOpts$props2 = renderOpts.props,
        props = _renderOpts$props2 === void 0 ? {} : _renderOpts$props2;
    var width = props.width,
        height = props.height,
        margin = props.margin,
        labelColor = props.labelColor,
        lineColor = props.lineColor,
        lineBgColor = props.lineBgColor,
        hollowColor = props.hollowColor;
    var progressValue = Math.min(100, _ctor["default"].toNumber(cellValue[index]));
    var barMargin = _ctor["default"].isNumber(margin) ? "".concat(margin, "px") : margin;
    var halfRing = 0;
    var maskRing = 0;

    if (progressValue) {
      if (progressValue > 50) {
        halfRing = _ctor["default"].floor((progressValue - 50) * 3.6);
        maskRing = 180;
      } else {
        maskRing = _ctor["default"].floor(progressValue * 3.6);
      }
    }

    return h('span', {
      "class": 'vxe-renderer--progress-ring',
      style: {
        margin: barMargin,
        width: _ctor["default"].isNumber(width) ? "".concat(width, "px") : width,
        height: _ctor["default"].isNumber(height) ? "".concat(height, "px") : height,
        backgroundColor: lineBgColor
      }
    }, [h('span', {
      "class": 'vxe-renderer--progress-ring-piece-prev',
      style: {
        backgroundColor: lineColor || defaultLineColors[index]
      }
    }), h('span', {
      "class": ['vxe-renderer--progress-ring-piece-naxt', {
        'is--half': halfRing
      }],
      style: {
        backgroundColor: lineColor || defaultLineColors[index],
        transform: "rotate(".concat(halfRing, "deg)")
      }
    }), h('span', {
      "class": 'vxe-renderer--progress-ring-mask',
      style: {
        backgroundColor: lineBgColor,
        transform: "rotate(".concat(maskRing, "deg)")
      }
    }), h('span', {
      "class": 'vxe-renderer--progress-ring-hollow',
      style: {
        backgroundColor: hollowColor
      }
    }), h('span', {
      "class": 'vxe-renderer--progress-ring-label',
      style: {
        color: labelColor
      }
    }, "".concat(progressValue, "%"))]);
  });
}
/**
 * 渲染函数
 */


var renderMap = {
  ProgressBar: {
    renderDefault: function renderDefault(h, renderOpts, params) {
      return createProgressBarVNs(h, params, [renderOpts]);
    }
  },
  ProgressBars: {
    renderDefault: function renderDefault(h, renderOpts, params) {
      return createProgressBarVNs(h, params, renderOpts.children || []);
    }
  },
  ProgressRing: {
    renderDefault: function renderDefault(h, renderOpts, params) {
      return createProgressRingVNs(h, params, [renderOpts]);
    }
  },
  ProgressRings: {
    renderDefault: function renderDefault(h, renderOpts, params) {
      return createProgressRingVNs(h, params, renderOpts.children || []);
    }
  }
};
/**
 * 基于 vxe-table 表格的增强插件，提供一些常用的渲染器
 */

var VXETablePluginRenderer = {
  install: function install(xtable) {
    xtable.renderer.mixin(renderMap);
  }
};
exports.VXETablePluginRenderer = VXETablePluginRenderer;

if (typeof window !== 'undefined' && window.VXETable) {
  window.VXETable.use(VXETablePluginRenderer);
}

var _default = VXETablePluginRenderer;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRzIiwiaW5kZXguanMiXSwibmFtZXMiOlsiZGVmYXVsdExpbmVDb2xvcnMiLCJjcmVhdGVQcm9ncmVzc0JhclZOcyIsImgiLCJwYXJhbXMiLCJyZW5kZXJPcHRMaXN0Iiwicm93IiwiY29sdW1uIiwiY2VsbFZhbHVlIiwicHJvcGVydHkiLCJYRVV0aWxzIiwiaXNBcnJheSIsIm1hcCIsInJlbmRlck9wdHMiLCJpbmRleCIsInByb3BzIiwibWFyZ2luIiwibGluZVdpZHRoIiwibGluZUNvbG9yIiwibGluZUJnQ29sb3IiLCJwcm9ncmVzc1ZhbHVlIiwiTWF0aCIsIm1pbiIsInRvTnVtYmVyIiwiYmFyTWFyZ2luIiwiaXNOdW1iZXIiLCJiYXJIZWlnaHQiLCJsYWJlbFBvc2l0aW9uIiwic3R5bGUiLCJoZWlnaHQiLCJsaW5lSGVpZ2h0IiwiYmFja2dyb3VuZENvbG9yIiwid2lkdGgiLCJjcmVhdGVQcm9ncmVzc1JpbmdWTnMiLCJsYWJlbENvbG9yIiwiaG9sbG93Q29sb3IiLCJoYWxmUmluZyIsIm1hc2tSaW5nIiwiZmxvb3IiLCJ0cmFuc2Zvcm0iLCJjb2xvciIsInJlbmRlck1hcCIsIlByb2dyZXNzQmFyIiwicmVuZGVyRGVmYXVsdCIsIlByb2dyZXNzQmFycyIsImNoaWxkcmVuIiwiUHJvZ3Jlc3NSaW5nIiwiUHJvZ3Jlc3NSaW5ncyIsIlZYRVRhYmxlUGx1Z2luUmVuZGVyZXIiLCJpbnN0YWxsIiwieHRhYmxlIiwicmVuZGVyZXIiLCJtaXhpbiIsIndpbmRvdyIsIlZYRVRhYmxlIiwidXNlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBRUE7Ozs7OztBQU1BO0FBRUEsSUFBTUEsaUJBQWlCLEdBQUcsQ0FBQyxTQUFELEVBQVksU0FBWixFQUF1QixTQUF2QixFQUFrQyxTQUFsQyxFQUE2QyxTQUE3QyxFQUF3RCxTQUF4RCxFQUFtRSxTQUFuRSxFQUE4RSxTQUE5RSxDQUExQjs7QUFFQSxTQUFTQyxvQkFBVCxDQUErQkMsQ0FBL0IsRUFBaURDLE1B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QyxDQUFsQjtBQXVCQTtBQ1RBO0FBQ0E7O0FEV08sSUFBTUcsc0JBQXNCLEdBQUc7QUFDcENDLEVBQUFBLE9BRG9DLG1CQUMzQkMsTUFEMkIsRUFDSjtBQUM5QkEsSUFBQUEsTUFBTSxDQUFDQyxRQUFQLENBQWdCQyxLQUFoQixDQUFzQlgsU0FBdEI7QUFDRDtBQUhtQyxDQUEvQjs7O0FBTVAsSUFBSSxPQUFPWSxNQUFQLEtBQWtCLFdBQWxCLElBQWlDQSxNQUFNLENBQUNDLFFBQTVDLEVBQXNEO0FBQ3BERCxFQUFBQSxNQUFNLENBQUNDLFFBQVAsQ0FBZ0JDLEdBQWhCLENBQW9CUCxzQkFBcEI7QUFDRDs7ZUFFY0Esc0IiLCJmaWxlIjoiaW5kZXguY29tbW9uLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi9cclxuaW1wb3J0IHsgQ3JlYXRlRWxlbWVudCB9IGZyb20gJ3Z1ZSdcclxuaW1wb3J0IFhFVXRpbHMgZnJvbSAneGUtdXRpbHMvY3RvcidcclxuaW1wb3J0IHtcclxuICBWWEVUYWJsZSxcclxuICBDb2x1bW5DZWxsUmVuZGVyT3B0aW9ucyxcclxuICBDb2x1bW5DZWxsUmVuZGVyUGFyYW1zXHJcbn0gZnJvbSAndnhlLXRhYmxlL2xpYi92eGUtdGFibGUnXHJcbi8qIGVzbGludC1lbmFibGUgbm8tdW51c2VkLXZhcnMgKi9cclxuXHJcbmNvbnN0IGRlZmF1bHRMaW5lQ29sb3JzID0gWycjQzIzNTMxJywgJyMyRjQ1NTQnLCAnIzAwNjY5OScsICcjRDQ4MjY1JywgJyNGRkRCNUMnLCAnIzkxQzdBRScsICcjQkRBMjlBJywgJyM3OTdCN0YnXVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlUHJvZ3Jlc3NCYXJWTnMgKGg6IENyZWF0ZUVsZW1lbnQsIHBhcmFtczogQ29sdW1uQ2VsbFJlbmRlclBhcmFtcywgcmVuZGVyT3B0TGlzdDogQ29sdW1uQ2VsbFJlbmRlck9wdGlvbnNbXSkge1xyXG4gIGNvbnN0IHsgcm93LCBjb2x1bW4gfSA9IHBhcmFtc1xyXG4gIGxldCBjZWxsVmFsdWUgPSByb3dbY29sdW1uLnByb3BlcnR5XVxyXG4gIGlmICghWEVVdGlscy5pc0FycmF5KGNlbGxWYWx1ZSkpIHtcclxuICAgIGNlbGxWYWx1ZSA9IFtjZWxsVmFsdWVdXHJcbiAgfVxyXG4gIHJldHVybiByZW5kZXJPcHRMaXN0Lm1hcCgocmVuZGVyT3B0cywgaW5kZXgpID0+IHtcclxuICAgIGNvbnN0IHsgcHJvcHMgPSB7fSB9ID0gcmVuZGVyT3B0c1xyXG4gICAgY29uc3QgeyBtYXJnaW4sIGxpbmVXaWR0aCwgbGluZUNvbG9yLCBsaW5lQmdDb2xvciB9ID0gcHJvcHNcclxuICAgIGNvbnN0IHByb2dyZXNzVmFsdWUgPSBNYXRoLm1pbigxMDAsIFhFVXRpbHMudG9OdW1iZXIoY2VsbFZhbHVlW2luZGV4XSkpXHJcbiAgICBsZXQgYmFyTWFyZ2luID0gWEVVdGlscy5pc051bWJlcihtYXJnaW4pID8gYCR7bWFyZ2lufXB4YCA6IG1hcmdpblxyXG4gICAgbGV0IGJhckhlaWdodCA9IFhFVXRpbHMuaXNOdW1iZXIobGluZVdpZHRoKSA/IGAke2xpbmVXaWR0aH1weGAgOiBsaW5lV2lkdGhcclxuICAgIGxldCBsYWJlbFBvc2l0aW9uXHJcbiAgICBpZiAocHJvZ3Jlc3NWYWx1ZSA8IDMwKSB7XHJcbiAgICAgIGxhYmVsUG9zaXRpb24gPSAnb3V0ZXInXHJcbiAgICB9IGVsc2UgaWYgKHByb2dyZXNzVmFsdWUgPiA3MCkge1xyXG4gICAgICBsYWJlbFBvc2l0aW9uID0gJ2lubmVyJ1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGgoJ3NwYW4nLCB7XHJcbiAgICAgIGNsYXNzOiBbJ3Z4ZS1yZW5kZXJlci0tcHJvZ3Jlc3MtYmFyJywge1xyXG4gICAgICAgIFtgbGFiZWwtLSR7bGFiZWxQb3NpdGlvbn1gXTogbGFiZWxQb3NpdGlvblxyXG4gICAgICB9XSxcclxuICAgICAgc3R5bGU6IHtcclxuICAgICAgICBtYXJnaW46IGJhck1hcmdpbixcclxuICAgICAgICBoZWlnaHQ6IGJhckhlaWdodCxcclxuICAgICAgICBsaW5lSGVpZ2h0OiBiYXJIZWlnaHQsXHJcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiBsaW5lQmdDb2xvclxyXG4gICAgICB9XHJcbiAgICB9LCBbXHJcbiAgICAgIGgoJ3NwYW4nLCB7XHJcbiAgICAgICAgY2xhc3M6ICd2eGUtcmVuZGVyZXItLXByb2dyZXNzLWJhci1jaGFydCcsXHJcbiAgICAgICAgc3R5bGU6IHtcclxuICAgICAgICAgIHdpZHRoOiBgJHtwcm9ncmVzc1ZhbHVlfSVgLFxyXG4gICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBsaW5lQ29sb3IgfHwgZGVmYXVsdExpbmVDb2xvcnNbaW5kZXhdXHJcbiAgICAgICAgfVxyXG4gICAgICB9KSxcclxuICAgICAgaCgnc3BhbicsIHtcclxuICAgICAgICBjbGFzczogJ3Z4ZS1yZW5kZXJlci0tcHJvZ3Jlc3MtYmFyLWxhYmVsJ1xyXG4gICAgICB9LCBgJHtwcm9ncmVzc1ZhbHVlfSVgKVxyXG4gICAgXSlcclxuICB9KVxyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVQcm9ncmVzc1JpbmdWTnMgKGg6IENyZWF0ZUVsZW1lbnQsIHBhcmFtczogQ29sdW1uQ2VsbFJlbmRlclBhcmFtcywgcmVuZGVyT3B0TGlzdDogQ29sdW1uQ2VsbFJlbmRlck9wdGlvbnNbXSkge1xyXG4gIGNvbnN0IHsgcm93LCBjb2x1bW4gfSA9IHBhcmFtc1xyXG4gIGxldCBjZWxsVmFsdWUgPSByb3dbY29sdW1uLnByb3BlcnR5XVxyXG4gIGlmICghWEVVdGlscy5pc0FycmF5KGNlbGxWYWx1ZSkpIHtcclxuICAgIGNlbGxWYWx1ZSA9IFtjZWxsVmFsdWVdXHJcbiAgfVxyXG4gIHJldHVybiByZW5kZXJPcHRMaXN0Lm1hcCgocmVuZGVyT3B0cywgaW5kZXgpID0+IHtcclxuICAgIGNvbnN0IHsgcHJvcHMgPSB7fSB9ID0gcmVuZGVyT3B0c1xyXG4gICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0LCBtYXJnaW4sIGxhYmVsQ29sb3IsIGxpbmVDb2xvciwgbGluZUJnQ29sb3IsIGhvbGxvd0NvbG9yIH0gPSBwcm9wc1xyXG4gICAgY29uc3QgcHJvZ3Jlc3NWYWx1ZSA9IE1hdGgubWluKDEwMCwgWEVVdGlscy50b051bWJlcihjZWxsVmFsdWVbaW5kZXhdKSlcclxuICAgIGxldCBiYXJNYXJnaW4gPSBYRVV0aWxzLmlzTnVtYmVyKG1hcmdpbikgPyBgJHttYXJnaW59cHhgIDogbWFyZ2luXHJcbiAgICBsZXQgaGFsZlJpbmcgPSAwXHJcbiAgICBsZXQgbWFza1JpbmcgPSAwXHJcbiAgICBpZiAocHJvZ3Jlc3NWYWx1ZSkge1xyXG4gICAgICBpZiAocHJvZ3Jlc3NWYWx1ZSA+IDUwKSB7XHJcbiAgICAgICAgaGFsZlJpbmcgPSBYRVV0aWxzLmZsb29yKChwcm9ncmVzc1ZhbHVlIC0gNTApICogMy42KVxyXG4gICAgICAgIG1hc2tSaW5nID0gMTgwXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbWFza1JpbmcgPSBYRVV0aWxzLmZsb29yKHByb2dyZXNzVmFsdWUgKiAzLjYpXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBoKCdzcGFuJywge1xyXG4gICAgICBjbGFzczogJ3Z4ZS1yZW5kZXJlci0tcHJvZ3Jlc3MtcmluZycsXHJcbiAgICAgIHN0eWxlOiB7XHJcbiAgICAgICAgbWFyZ2luOiBiYXJNYXJnaW4sXHJcbiAgICAgICAgd2lkdGg6IFhFVXRpbHMuaXNOdW1iZXIod2lkdGgpID8gYCR7d2lkdGh9cHhgIDogd2lkdGgsXHJcbiAgICAgICAgaGVpZ2h0OiBYRVV0aWxzLmlzTnVtYmVyKGhlaWdodCkgPyBgJHtoZWlnaHR9cHhgIDogaGVpZ2h0LFxyXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogbGluZUJnQ29sb3JcclxuICAgICAgfVxyXG4gICAgfSwgW1xyXG4gICAgICBoKCdzcGFuJywge1xyXG4gICAgICAgIGNsYXNzOiAndnhlLXJlbmRlcmVyLS1wcm9ncmVzcy1yaW5nLXBpZWNlLXByZXYnLFxyXG4gICAgICAgIHN0eWxlOiB7XHJcbiAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGxpbmVDb2xvciB8fCBkZWZhdWx0TGluZUNvbG9yc1tpbmRleF1cclxuICAgICAgICB9XHJcbiAgICAgIH0pLFxyXG4gICAgICBoKCdzcGFuJywge1xyXG4gICAgICAgIGNsYXNzOiBbJ3Z4ZS1yZW5kZXJlci0tcHJvZ3Jlc3MtcmluZy1waWVjZS1uYXh0Jywge1xyXG4gICAgICAgICAgJ2lzLS1oYWxmJzogaGFsZlJpbmdcclxuICAgICAgICB9XSxcclxuICAgICAgICBzdHlsZToge1xyXG4gICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBsaW5lQ29sb3IgfHwgZGVmYXVsdExpbmVDb2xvcnNbaW5kZXhdLFxyXG4gICAgICAgICAgdHJhbnNmb3JtOiBgcm90YXRlKCR7aGFsZlJpbmd9ZGVnKWBcclxuICAgICAgICB9XHJcbiAgICAgIH0pLFxyXG4gICAgICBoKCdzcGFuJywge1xyXG4gICAgICAgIGNsYXNzOiAndnhlLXJlbmRlcmVyLS1wcm9ncmVzcy1yaW5nLW1hc2snLFxyXG4gICAgICAgIHN0eWxlOiB7XHJcbiAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGxpbmVCZ0NvbG9yLFxyXG4gICAgICAgICAgdHJhbnNmb3JtOiBgcm90YXRlKCR7bWFza1Jpbmd9ZGVnKWBcclxuICAgICAgICB9XHJcbiAgICAgIH0pLFxyXG4gICAgICBoKCdzcGFuJywge1xyXG4gICAgICAgIGNsYXNzOiAndnhlLXJlbmRlcmVyLS1wcm9ncmVzcy1yaW5nLWhvbGxvdycsXHJcbiAgICAgICAgc3R5bGU6IHtcclxuICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogaG9sbG93Q29sb3JcclxuICAgICAgICB9XHJcbiAgICAgIH0pLFxyXG4gICAgICBoKCdzcGFuJywge1xyXG4gICAgICAgIGNsYXNzOiAndnhlLXJlbmRlcmVyLS1wcm9ncmVzcy1yaW5nLWxhYmVsJyxcclxuICAgICAgICBzdHlsZToge1xyXG4gICAgICAgICAgY29sb3I6IGxhYmVsQ29sb3JcclxuICAgICAgICB9XHJcbiAgICAgIH0sIGAke3Byb2dyZXNzVmFsdWV9JWApXHJcbiAgICBdKVxyXG4gIH0pXHJcbn1cclxuXHJcbi8qKlxyXG4gKiDmuLLmn5Plh73mlbBcclxuICovXHJcbmNvbnN0IHJlbmRlck1hcCA9IHtcclxuICBQcm9ncmVzc0Jhcjoge1xyXG4gICAgcmVuZGVyRGVmYXVsdCAoaDogQ3JlYXRlRWxlbWVudCwgcmVuZGVyT3B0czogQ29sdW1uQ2VsbFJlbmRlck9wdGlvbnMsIHBhcmFtczogQ29sdW1uQ2VsbFJlbmRlclBhcmFtcykge1xyXG4gICAgICByZXR1cm4gY3JlYXRlUHJvZ3Jlc3NCYXJWTnMoaCwgcGFyYW1zLCBbcmVuZGVyT3B0c10pXHJcbiAgICB9XHJcbiAgfSxcclxuICBQcm9ncmVzc0JhcnM6IHtcclxuICAgIHJlbmRlckRlZmF1bHQgKGg6IENyZWF0ZUVsZW1lbnQsIHJlbmRlck9wdHM6IENvbHVtbkNlbGxSZW5kZXJPcHRpb25zLCBwYXJhbXM6IENvbHVtbkNlbGxSZW5kZXJQYXJhbXMpIHtcclxuICAgICAgcmV0dXJuIGNyZWF0ZVByb2dyZXNzQmFyVk5zKGgsIHBhcmFtcywgcmVuZGVyT3B0cy5jaGlsZHJlbiB8fCBbXSlcclxuICAgIH1cclxuICB9LFxyXG4gIFByb2dyZXNzUmluZzoge1xyXG4gICAgcmVuZGVyRGVmYXVsdCAoaDogQ3JlYXRlRWxlbWVudCwgcmVuZGVyT3B0czogQ29sdW1uQ2VsbFJlbmRlck9wdGlvbnMsIHBhcmFtczogQ29sdW1uQ2VsbFJlbmRlclBhcmFtcykge1xyXG4gICAgICByZXR1cm4gY3JlYXRlUHJvZ3Jlc3NSaW5nVk5zKGgsIHBhcmFtcywgW3JlbmRlck9wdHNdKVxyXG4gICAgfVxyXG4gIH0sXHJcbiAgUHJvZ3Jlc3NSaW5nczoge1xyXG4gICAgcmVuZGVyRGVmYXVsdCAoaDogQ3JlYXRlRWxlbWVudCwgcmVuZGVyT3B0czogQ29sdW1uQ2VsbFJlbmRlck9wdGlvbnMsIHBhcmFtczogQ29sdW1uQ2VsbFJlbmRlclBhcmFtcykge1xyXG4gICAgICByZXR1cm4gY3JlYXRlUHJvZ3Jlc3NSaW5nVk5zKGgsIHBhcmFtcywgcmVuZGVyT3B0cy5jaGlsZHJlbiB8fCBbXSlcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDln7rkuo4gdnhlLXRhYmxlIOihqOagvOeahOWinuW8uuaPkuS7tu+8jOaPkOS+m+S4gOS6m+W4uOeUqOeahOa4suafk+WZqFxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IFZYRVRhYmxlUGx1Z2luUmVuZGVyZXIgPSB7XHJcbiAgaW5zdGFsbCAoeHRhYmxlOiB0eXBlb2YgVlhFVGFibGUpIHtcclxuICAgIHh0YWJsZS5yZW5kZXJlci5taXhpbihyZW5kZXJNYXApXHJcbiAgfVxyXG59XHJcblxyXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LlZYRVRhYmxlKSB7XHJcbiAgd2luZG93LlZYRVRhYmxlLnVzZShWWEVUYWJsZVBsdWdpblJlbmRlcmVyKVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBWWEVUYWJsZVBsdWdpblJlbmRlcmVyXHJcbiIsImltcG9ydCBYRVV0aWxzIGZyb20gJ3hlLXV0aWxzL2N0b3InO1xuLyogZXNsaW50LWVuYWJsZSBuby11bnVzZWQtdmFycyAqL1xuY29uc3QgZGVmYXVsdExpbmVDb2xvcnMgPSBbJyNDMjM1MzEnLCAnIzJGNDU1NCcsICcjMDA2Njk5JywgJyNENDgyNjUnLCAnI0ZGREI1QycsICcjOTFDN0FFJywgJyNCREEyOUEnLCAnIzc5N0I3RiddO1xuZnVuY3Rpb24gY3JlYXRlUHJvZ3Jlc3NCYXJWTnMoaCwgcGFyYW1zLCByZW5kZXJPcHRMaXN0KSB7XG4gICAgY29uc3QgeyByb3csIGNvbHVtbiB9ID0gcGFyYW1zO1xuICAgIGxldCBjZWxsVmFsdWUgPSByb3dbY29sdW1uLnByb3BlcnR5XTtcbiAgICBpZiAoIVhFVXRpbHMuaXNBcnJheShjZWxsVmFsdWUpKSB7XG4gICAgICAgIGNlbGxWYWx1ZSA9IFtjZWxsVmFsdWVdO1xuICAgIH1cbiAgICByZXR1cm4gcmVuZGVyT3B0TGlzdC5tYXAoKHJlbmRlck9wdHMsIGluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IHsgcHJvcHMgPSB7fSB9ID0gcmVuZGVyT3B0cztcbiAgICAgICAgY29uc3QgeyBtYXJnaW4sIGxpbmVXaWR0aCwgbGluZUNvbG9yLCBsaW5lQmdDb2xvciB9ID0gcHJvcHM7XG4gICAgICAgIGNvbnN0IHByb2dyZXNzVmFsdWUgPSBNYXRoLm1pbigxMDAsIFhFVXRpbHMudG9OdW1iZXIoY2VsbFZhbHVlW2luZGV4XSkpO1xuICAgICAgICBsZXQgYmFyTWFyZ2luID0gWEVVdGlscy5pc051bWJlcihtYXJnaW4pID8gYCR7bWFyZ2lufXB4YCA6IG1hcmdpbjtcbiAgICAgICAgbGV0IGJhckhlaWdodCA9IFhFVXRpbHMuaXNOdW1iZXIobGluZVdpZHRoKSA/IGAke2xpbmVXaWR0aH1weGAgOiBsaW5lV2lkdGg7XG4gICAgICAgIGxldCBsYWJlbFBvc2l0aW9uO1xuICAgICAgICBpZiAocHJvZ3Jlc3NWYWx1ZSA8IDMwKSB7XG4gICAgICAgICAgICBsYWJlbFBvc2l0aW9uID0gJ291dGVyJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwcm9ncmVzc1ZhbHVlID4gNzApIHtcbiAgICAgICAgICAgIGxhYmVsUG9zaXRpb24gPSAnaW5uZXInO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBoKCdzcGFuJywge1xuICAgICAgICAgICAgY2xhc3M6IFsndnhlLXJlbmRlcmVyLS1wcm9ncmVzcy1iYXInLCB7XG4gICAgICAgICAgICAgICAgICAgIFtgbGFiZWwtLSR7bGFiZWxQb3NpdGlvbn1gXTogbGFiZWxQb3NpdGlvblxuICAgICAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICBtYXJnaW46IGJhck1hcmdpbixcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IGJhckhlaWdodCxcbiAgICAgICAgICAgICAgICBsaW5lSGVpZ2h0OiBiYXJIZWlnaHQsXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBsaW5lQmdDb2xvclxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBbXG4gICAgICAgICAgICBoKCdzcGFuJywge1xuICAgICAgICAgICAgICAgIGNsYXNzOiAndnhlLXJlbmRlcmVyLS1wcm9ncmVzcy1iYXItY2hhcnQnLFxuICAgICAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiBgJHtwcm9ncmVzc1ZhbHVlfSVgLFxuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGxpbmVDb2xvciB8fCBkZWZhdWx0TGluZUNvbG9yc1tpbmRleF1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIGgoJ3NwYW4nLCB7XG4gICAgICAgICAgICAgICAgY2xhc3M6ICd2eGUtcmVuZGVyZXItLXByb2dyZXNzLWJhci1sYWJlbCdcbiAgICAgICAgICAgIH0sIGAke3Byb2dyZXNzVmFsdWV9JWApXG4gICAgICAgIF0pO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gY3JlYXRlUHJvZ3Jlc3NSaW5nVk5zKGgsIHBhcmFtcywgcmVuZGVyT3B0TGlzdCkge1xuICAgIGNvbnN0IHsgcm93LCBjb2x1bW4gfSA9IHBhcmFtcztcbiAgICBsZXQgY2VsbFZhbHVlID0gcm93W2NvbHVtbi5wcm9wZXJ0eV07XG4gICAgaWYgKCFYRVV0aWxzLmlzQXJyYXkoY2VsbFZhbHVlKSkge1xuICAgICAgICBjZWxsVmFsdWUgPSBbY2VsbFZhbHVlXTtcbiAgICB9XG4gICAgcmV0dXJuIHJlbmRlck9wdExpc3QubWFwKChyZW5kZXJPcHRzLCBpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCB7IHByb3BzID0ge30gfSA9IHJlbmRlck9wdHM7XG4gICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCwgbWFyZ2luLCBsYWJlbENvbG9yLCBsaW5lQ29sb3IsIGxpbmVCZ0NvbG9yLCBob2xsb3dDb2xvciB9ID0gcHJvcHM7XG4gICAgICAgIGNvbnN0IHByb2dyZXNzVmFsdWUgPSBNYXRoLm1pbigxMDAsIFhFVXRpbHMudG9OdW1iZXIoY2VsbFZhbHVlW2luZGV4XSkpO1xuICAgICAgICBsZXQgYmFyTWFyZ2luID0gWEVVdGlscy5pc051bWJlcihtYXJnaW4pID8gYCR7bWFyZ2lufXB4YCA6IG1hcmdpbjtcbiAgICAgICAgbGV0IGhhbGZSaW5nID0gMDtcbiAgICAgICAgbGV0IG1hc2tSaW5nID0gMDtcbiAgICAgICAgaWYgKHByb2dyZXNzVmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChwcm9ncmVzc1ZhbHVlID4gNTApIHtcbiAgICAgICAgICAgICAgICBoYWxmUmluZyA9IFhFVXRpbHMuZmxvb3IoKHByb2dyZXNzVmFsdWUgLSA1MCkgKiAzLjYpO1xuICAgICAgICAgICAgICAgIG1hc2tSaW5nID0gMTgwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbWFza1JpbmcgPSBYRVV0aWxzLmZsb29yKHByb2dyZXNzVmFsdWUgKiAzLjYpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBoKCdzcGFuJywge1xuICAgICAgICAgICAgY2xhc3M6ICd2eGUtcmVuZGVyZXItLXByb2dyZXNzLXJpbmcnLFxuICAgICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICBtYXJnaW46IGJhck1hcmdpbixcbiAgICAgICAgICAgICAgICB3aWR0aDogWEVVdGlscy5pc051bWJlcih3aWR0aCkgPyBgJHt3aWR0aH1weGAgOiB3aWR0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IFhFVXRpbHMuaXNOdW1iZXIoaGVpZ2h0KSA/IGAke2hlaWdodH1weGAgOiBoZWlnaHQsXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBsaW5lQmdDb2xvclxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBbXG4gICAgICAgICAgICBoKCdzcGFuJywge1xuICAgICAgICAgICAgICAgIGNsYXNzOiAndnhlLXJlbmRlcmVyLS1wcm9ncmVzcy1yaW5nLXBpZWNlLXByZXYnLFxuICAgICAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogbGluZUNvbG9yIHx8IGRlZmF1bHRMaW5lQ29sb3JzW2luZGV4XVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgaCgnc3BhbicsIHtcbiAgICAgICAgICAgICAgICBjbGFzczogWyd2eGUtcmVuZGVyZXItLXByb2dyZXNzLXJpbmctcGllY2UtbmF4dCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdpcy0taGFsZic6IGhhbGZSaW5nXG4gICAgICAgICAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogbGluZUNvbG9yIHx8IGRlZmF1bHRMaW5lQ29sb3JzW2luZGV4XSxcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBgcm90YXRlKCR7aGFsZlJpbmd9ZGVnKWBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIGgoJ3NwYW4nLCB7XG4gICAgICAgICAgICAgICAgY2xhc3M6ICd2eGUtcmVuZGVyZXItLXByb2dyZXNzLXJpbmctbWFzaycsXG4gICAgICAgICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBsaW5lQmdDb2xvcixcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBgcm90YXRlKCR7bWFza1Jpbmd9ZGVnKWBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIGgoJ3NwYW4nLCB7XG4gICAgICAgICAgICAgICAgY2xhc3M6ICd2eGUtcmVuZGVyZXItLXByb2dyZXNzLXJpbmctaG9sbG93JyxcbiAgICAgICAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGhvbGxvd0NvbG9yXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBoKCdzcGFuJywge1xuICAgICAgICAgICAgICAgIGNsYXNzOiAndnhlLXJlbmRlcmVyLS1wcm9ncmVzcy1yaW5nLWxhYmVsJyxcbiAgICAgICAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgICAgICAgICBjb2xvcjogbGFiZWxDb2xvclxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIGAke3Byb2dyZXNzVmFsdWV9JWApXG4gICAgICAgIF0pO1xuICAgIH0pO1xufVxuLyoqXG4gKiDmuLLmn5Plh73mlbBcbiAqL1xuY29uc3QgcmVuZGVyTWFwID0ge1xuICAgIFByb2dyZXNzQmFyOiB7XG4gICAgICAgIHJlbmRlckRlZmF1bHQoaCwgcmVuZGVyT3B0cywgcGFyYW1zKSB7XG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlUHJvZ3Jlc3NCYXJWTnMoaCwgcGFyYW1zLCBbcmVuZGVyT3B0c10pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBQcm9ncmVzc0JhcnM6IHtcbiAgICAgICAgcmVuZGVyRGVmYXVsdChoLCByZW5kZXJPcHRzLCBwYXJhbXMpIHtcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVQcm9ncmVzc0JhclZOcyhoLCBwYXJhbXMsIHJlbmRlck9wdHMuY2hpbGRyZW4gfHwgW10pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBQcm9ncmVzc1Jpbmc6IHtcbiAgICAgICAgcmVuZGVyRGVmYXVsdChoLCByZW5kZXJPcHRzLCBwYXJhbXMpIHtcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVQcm9ncmVzc1JpbmdWTnMoaCwgcGFyYW1zLCBbcmVuZGVyT3B0c10pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBQcm9ncmVzc1JpbmdzOiB7XG4gICAgICAgIHJlbmRlckRlZmF1bHQoaCwgcmVuZGVyT3B0cywgcGFyYW1zKSB7XG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlUHJvZ3Jlc3NSaW5nVk5zKGgsIHBhcmFtcywgcmVuZGVyT3B0cy5jaGlsZHJlbiB8fCBbXSk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuLyoqXG4gKiDln7rkuo4gdnhlLXRhYmxlIOihqOagvOeahOWinuW8uuaPkuS7tu+8jOaPkOS+m+S4gOS6m+W4uOeUqOeahOa4suafk+WZqFxuICovXG5leHBvcnQgY29uc3QgVlhFVGFibGVQbHVnaW5SZW5kZXJlciA9IHtcbiAgICBpbnN0YWxsKHh0YWJsZSkge1xuICAgICAgICB4dGFibGUucmVuZGVyZXIubWl4aW4ocmVuZGVyTWFwKTtcbiAgICB9XG59O1xuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5WWEVUYWJsZSkge1xuICAgIHdpbmRvdy5WWEVUYWJsZS51c2UoVlhFVGFibGVQbHVnaW5SZW5kZXJlcik7XG59XG5leHBvcnQgZGVmYXVsdCBWWEVUYWJsZVBsdWdpblJlbmRlcmVyO1xuIl19
