"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = exports.VXETablePluginRenderer = void 0;

var _ctor = _interopRequireDefault(require("xe-utils/ctor"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

/* eslint-enable no-unused-vars */

/**
 * 渲染函数
 */
var renderMap = {
  ProgressBar: {
    renderDefault: function renderDefault(h, renderOpts, params) {
      var row = params.row,
          column = params.column;
      var _renderOpts$props = renderOpts.props,
          props = _renderOpts$props === void 0 ? {} : _renderOpts$props;
      var lineWidth = props.lineWidth,
          lineColor = props.lineColor,
          lineBgColor = props.lineBgColor;
      var cellValue = Math.min(100, _ctor["default"].toNumber(row[column.property]));
      var labelPosition;

      if (cellValue < 30) {
        labelPosition = 'outer';
      } else if (cellValue > 70) {
        labelPosition = 'inner';
      }

      return [h('span', {
        "class": ['vxe-renderer--progress-bar', _defineProperty({}, "label--".concat(labelPosition), labelPosition)],
        style: {
          backgroundColor: lineBgColor
        }
      }, [h('span', {
        "class": 'vxe-renderer--progress-bar-chart',
        style: {
          width: "".concat(cellValue, "%"),
          height: _ctor["default"].isNumber(lineWidth) ? "".concat(lineWidth) : lineWidth,
          backgroundColor: lineColor
        }
      }), h('span', {
        "class": 'vxe-renderer--progress-bar-label'
      }, "".concat(cellValue, "%"))])];
    }
  },
  ProgressRing: {
    renderDefault: function renderDefault(h, renderOpts, params) {
      var row = params.row,
          column = params.column;
      var _renderOpts$props2 = renderOpts.props,
          props = _renderOpts$props2 === void 0 ? {} : _renderOpts$props2;
      var width = props.width,
          height = props.height,
          labelColor = props.labelColor,
          lineColor = props.lineColor,
          lineBgColor = props.lineBgColor,
          hollowColor = props.hollowColor;
      var cellValue = Math.min(100, _ctor["default"].toNumber(row[column.property]));
      var halfRing = 0;
      var maskRing = 0;

      if (cellValue) {
        if (cellValue > 50) {
          halfRing = _ctor["default"].floor((cellValue - 50) * 3.6);
          maskRing = 180;
        } else {
          maskRing = _ctor["default"].floor(cellValue * 3.6);
        }
      }

      return [h('span', {
        "class": 'vxe-renderer--progress-ring',
        style: {
          width: _ctor["default"].isNumber(width) ? "".concat(width, "px") : width,
          height: _ctor["default"].isNumber(height) ? "".concat(height, "px") : height,
          backgroundColor: lineBgColor
        }
      }, [h('span', {
        "class": 'vxe-renderer--progress-ring-piece-prev',
        style: {
          backgroundColor: lineColor
        }
      }), h('span', {
        "class": ['vxe-renderer--progress-ring-piece-naxt', {
          'is--half': halfRing
        }],
        style: {
          backgroundColor: lineColor,
          transform: "rotate(".concat(halfRing, "deg)")
        }
      }), h('span', {
        "class": 'vxe-renderer--progress-ring-mask',
        style: {
          backgroundColor: lineBgColor,
          transform: "rotate(".concat(maskRing, "deg)")
        }
      }), h('span', {
        "class": 'vxe-renderer--progress-ring-hollow',
        style: {
          backgroundColor: hollowColor
        }
      }), h('span', {
        "class": 'vxe-renderer--progress-ring-label',
        style: {
          color: labelColor
        }
      }, "".concat(cellValue, "%"))])];
    }
  }
};
/**
 * 基于 vxe-table 表格的增强插件，提供一些常用的渲染器
 */

var VXETablePluginRenderer = {
  install: function install(xtable) {
    xtable.renderer.mixin(renderMap);
  }
};
exports.VXETablePluginRenderer = VXETablePluginRenderer;

if (typeof window !== 'undefined' && window.VXETable) {
  window.VXETable.use(VXETablePluginRenderer);
}

var _default = VXETablePluginRenderer;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRzIiwiaW5kZXguanMiXSwibmFtZXMiOlsicmVuZGVyTWFwIiwiUHJvZ3Jlc3NCYXIiLCJyZW5kZXJEZWZhdWx0IiwiaCIsInJlbmRlck9wdHMiLCJwYXJhbXMiLCJyb3ciLCJjb2x1bW4iLCJwcm9wcyIsImxpbmVXaWR0aCIsImxpbmVDb2xvciIsImxpbmVCZ0NvbG9yIiwiY2VsbFZhbHVlIiwiTWF0aCIsIm1pbiIsIlhFVXRpbHMiLCJ0b051bWJlciIsInByb3BlcnR5IiwibGFiZWxQb3NpdGlvbiIsInN0eWxlIiwiYmFja2dyb3VuZENvbG9yIiwid2lkdGgiLCJoZWlnaHQiLCJpc051bWJlciIsIlByb2dyZXNzUmluZyIsImxhYmVsQ29sb3IiLCJob2xsb3dDb2xvciIsImhhbGZSaW5nIiwibWFza1JpbmciLCJmbG9vciIsInRyYW5zZm9ybSIsImNvbG9yIiwiVlhFVGFibGVQbHVnaW5SZW5kZXJlciIsImluc3RhbGwiLCJ4dGFibGUiLCJyZW5kZXJlciIsIm1peGluIiwid2luZG93IiwiVlhFVGFibGUiLCJ1c2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFFQTs7Ozs7O0FBTUE7O0FBRUE7QUNQQTtBQUNBO0FEU0EsSUFBTUEsU0FBUyxHQUFHO0FBQ2hCQyxFQUFBQSxXQUFXLEVBQUU7QUFDWEMsSUFBQUEsYUFEVyx5QkFDSUMsQ0FESixFQUNzQkMsVUFEdEIsRUFDMkRDLE1BRDNELEVBQ3lGO0FBQUEsVUFDMUZDLEdBRDBGLEdBQzFFRCxNQUQwRSxDQUMxRkMsR0FEMEY7QUFBQSxVQUNyRkMsTUFEcUYsR0FDMUVGLE1BRDBFLENBQ3JGRSxNQURxRjtBQUFBLDhCQUUzRUgsVUFGMkUsQ0FFMUZJLEtBRjBGO0FBQUEsVUFFMUZBLEtBRjBGLGtDQUVsRixFQUZrRjtBQUFBLFVBRzFGQyxTQUgwRixHQUdwREQsS0FIb0QsQ0FHMUZDLFNBSDBGO0FBQUEsVUFHL0VDLFNBSCtFLEdBR3BERixLQUhvRCxDQUcvRUUsU0FIK0U7QUFBQSxVQUdwRUMs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UU8sSUFBTW9CLHNCQUFzQixHQUFHO0FBQ3BDQyxFQUFBQSxPQURvQyxtQkFDM0JDLE1BRDJCLEVBQ0o7QUFDOUJBLElBQUFBLE1BQU0sQ0FBQ0MsUUFBUCxDQUFnQkMsS0FBaEIsQ0FBc0JwQyxTQUF0QjtBQUNEO0FBSG1DLENBQS9COzs7QUFNUCxJQUFJLE9BQU9xQyxNQUFQLEtBQWtCLFdBQWxCLElBQWlDQSxNQUFNLENBQUNDLFFBQTVDLEVBQXNEO0FBQ3BERCxFQUFBQSxNQUFNLENBQUNDLFFBQVAsQ0FBZ0JDLEdBQWhCLENBQW9CUCxzQkFBcEI7QUFDRDs7ZUFFY0Esc0IiLCJmaWxlIjoiaW5kZXguY29tbW9uLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi9cclxuaW1wb3J0IHsgQ3JlYXRlRWxlbWVudCB9IGZyb20gJ3Z1ZSdcclxuaW1wb3J0IFhFVXRpbHMgZnJvbSAneGUtdXRpbHMvY3RvcidcclxuaW1wb3J0IHtcclxuICBWWEVUYWJsZSxcclxuICBDb2x1bW5DZWxsUmVuZGVyT3B0aW9ucyxcclxuICBDb2x1bW5DZWxsUmVuZGVyUGFyYW1zXHJcbn0gZnJvbSAndnhlLXRhYmxlL2xpYi92eGUtdGFibGUnXHJcbi8qIGVzbGludC1lbmFibGUgbm8tdW51c2VkLXZhcnMgKi9cclxuXHJcbi8qKlxyXG4gKiDmuLLmn5Plh73mlbBcclxuICovXHJcbmNvbnN0IHJlbmRlck1hcCA9IHtcclxuICBQcm9ncmVzc0Jhcjoge1xyXG4gICAgcmVuZGVyRGVmYXVsdCAoaDogQ3JlYXRlRWxlbWVudCwgcmVuZGVyT3B0czogQ29sdW1uQ2VsbFJlbmRlck9wdGlvbnMsIHBhcmFtczogQ29sdW1uQ2VsbFJlbmRlclBhcmFtcykge1xyXG4gICAgICBjb25zdCB7IHJvdywgY29sdW1uIH0gPSBwYXJhbXNcclxuICAgICAgY29uc3QgeyBwcm9wcyA9IHt9IH0gPSByZW5kZXJPcHRzXHJcbiAgICAgIGNvbnN0IHsgbGluZVdpZHRoLCBsaW5lQ29sb3IsIGxpbmVCZ0NvbG9yIH0gPSBwcm9wc1xyXG4gICAgICBjb25zdCBjZWxsVmFsdWUgPSBNYXRoLm1pbigxMDAsIFhFVXRpbHMudG9OdW1iZXIocm93W2NvbHVtbi5wcm9wZXJ0eV0pKVxyXG4gICAgICBsZXQgbGFiZWxQb3NpdGlvblxyXG4gICAgICBpZiAoY2VsbFZhbHVlIDwgMzApIHtcclxuICAgICAgICBsYWJlbFBvc2l0aW9uID0gJ291dGVyJ1xyXG4gICAgICB9IGVsc2UgaWYgKGNlbGxWYWx1ZSA+IDcwKSB7XHJcbiAgICAgICAgbGFiZWxQb3NpdGlvbiA9ICdpbm5lcidcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gW1xyXG4gICAgICAgIGgoJ3NwYW4nLCB7XHJcbiAgICAgICAgICBjbGFzczogWyd2eGUtcmVuZGVyZXItLXByb2dyZXNzLWJhcicsIHtcclxuICAgICAgICAgICAgW2BsYWJlbC0tJHtsYWJlbFBvc2l0aW9ufWBdOiBsYWJlbFBvc2l0aW9uXHJcbiAgICAgICAgICB9XSxcclxuICAgICAgICAgIHN0eWxlOiB7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogbGluZUJnQ29sb3JcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LCBbXHJcbiAgICAgICAgICBoKCdzcGFuJywge1xyXG4gICAgICAgICAgICBjbGFzczogJ3Z4ZS1yZW5kZXJlci0tcHJvZ3Jlc3MtYmFyLWNoYXJ0JyxcclxuICAgICAgICAgICAgc3R5bGU6IHtcclxuICAgICAgICAgICAgICB3aWR0aDogYCR7Y2VsbFZhbHVlfSVgLFxyXG4gICAgICAgICAgICAgIGhlaWdodDogWEVVdGlscy5pc051bWJlcihsaW5lV2lkdGgpID8gYCR7bGluZVdpZHRofWAgOiBsaW5lV2lkdGgsXHJcbiAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBsaW5lQ29sb3JcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSksXHJcbiAgICAgICAgICBoKCdzcGFuJywge1xyXG4gICAgICAgICAgICBjbGFzczogJ3Z4ZS1yZW5kZXJlci0tcHJvZ3Jlc3MtYmFyLWxhYmVsJ1xyXG4gICAgICAgICAgfSwgYCR7Y2VsbFZhbHVlfSVgKVxyXG4gICAgICAgIF0pXHJcbiAgICAgIF1cclxuICAgIH1cclxuICB9LFxyXG4gIFByb2dyZXNzUmluZzoge1xyXG4gICAgcmVuZGVyRGVmYXVsdCAoaDogQ3JlYXRlRWxlbWVudCwgcmVuZGVyT3B0czogQ29sdW1uQ2VsbFJlbmRlck9wdGlvbnMsIHBhcmFtczogQ29sdW1uQ2VsbFJlbmRlclBhcmFtcykge1xyXG4gICAgICBjb25zdCB7IHJvdywgY29sdW1uIH0gPSBwYXJhbXNcclxuICAgICAgY29uc3QgeyBwcm9wcyA9IHt9IH0gPSByZW5kZXJPcHRzXHJcbiAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCwgbGFiZWxDb2xvciwgbGluZUNvbG9yLCBsaW5lQmdDb2xvciwgaG9sbG93Q29sb3IgfSA9IHByb3BzXHJcbiAgICAgIGNvbnN0IGNlbGxWYWx1ZSA9IE1hdGgubWluKDEwMCwgWEVVdGlscy50b051bWJlcihyb3dbY29sdW1uLnByb3BlcnR5XSkpXHJcbiAgICAgIGxldCBoYWxmUmluZyA9IDBcclxuICAgICAgbGV0IG1hc2tSaW5nID0gMFxyXG4gICAgICBpZiAoY2VsbFZhbHVlKSB7XHJcbiAgICAgICAgaWYgKGNlbGxWYWx1ZSA+IDUwKSB7XHJcbiAgICAgICAgICBoYWxmUmluZyA9IFhFVXRpbHMuZmxvb3IoKGNlbGxWYWx1ZSAtIDUwKSAqIDMuNilcclxuICAgICAgICAgIG1hc2tSaW5nID0gMTgwXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIG1hc2tSaW5nID0gWEVVdGlscy5mbG9vcihjZWxsVmFsdWUgKiAzLjYpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBbXHJcbiAgICAgICAgaCgnc3BhbicsIHtcclxuICAgICAgICAgIGNsYXNzOiAndnhlLXJlbmRlcmVyLS1wcm9ncmVzcy1yaW5nJyxcclxuICAgICAgICAgIHN0eWxlOiB7XHJcbiAgICAgICAgICAgIHdpZHRoOiBYRVV0aWxzLmlzTnVtYmVyKHdpZHRoKSA/IGAke3dpZHRofXB4YCA6IHdpZHRoLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IFhFVXRpbHMuaXNOdW1iZXIoaGVpZ2h0KSA/IGAke2hlaWdodH1weGAgOiBoZWlnaHQsXHJcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogbGluZUJnQ29sb3JcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LCBbXHJcbiAgICAgICAgICBoKCdzcGFuJywge1xyXG4gICAgICAgICAgICBjbGFzczogJ3Z4ZS1yZW5kZXJlci0tcHJvZ3Jlc3MtcmluZy1waWVjZS1wcmV2JyxcclxuICAgICAgICAgICAgc3R5bGU6IHtcclxuICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGxpbmVDb2xvclxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KSxcclxuICAgICAgICAgIGgoJ3NwYW4nLCB7XHJcbiAgICAgICAgICAgIGNsYXNzOiBbJ3Z4ZS1yZW5kZXJlci0tcHJvZ3Jlc3MtcmluZy1waWVjZS1uYXh0Jywge1xyXG4gICAgICAgICAgICAgICdpcy0taGFsZic6IGhhbGZSaW5nXHJcbiAgICAgICAgICAgIH1dLFxyXG4gICAgICAgICAgICBzdHlsZToge1xyXG4gICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogbGluZUNvbG9yLFxyXG4gICAgICAgICAgICAgIHRyYW5zZm9ybTogYHJvdGF0ZSgke2hhbGZSaW5nfWRlZylgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgaCgnc3BhbicsIHtcclxuICAgICAgICAgICAgY2xhc3M6ICd2eGUtcmVuZGVyZXItLXByb2dyZXNzLXJpbmctbWFzaycsXHJcbiAgICAgICAgICAgIHN0eWxlOiB7XHJcbiAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBsaW5lQmdDb2xvcixcclxuICAgICAgICAgICAgICB0cmFuc2Zvcm06IGByb3RhdGUoJHttYXNrUmluZ31kZWcpYFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KSxcclxuICAgICAgICAgIGgoJ3NwYW4nLCB7XHJcbiAgICAgICAgICAgIGNsYXNzOiAndnhlLXJlbmRlcmVyLS1wcm9ncmVzcy1yaW5nLWhvbGxvdycsXHJcbiAgICAgICAgICAgIHN0eWxlOiB7XHJcbiAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBob2xsb3dDb2xvclxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KSxcclxuICAgICAgICAgIGgoJ3NwYW4nLCB7XHJcbiAgICAgICAgICAgIGNsYXNzOiAndnhlLXJlbmRlcmVyLS1wcm9ncmVzcy1yaW5nLWxhYmVsJyxcclxuICAgICAgICAgICAgc3R5bGU6IHtcclxuICAgICAgICAgICAgICBjb2xvcjogbGFiZWxDb2xvclxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9LCBgJHtjZWxsVmFsdWV9JWApXHJcbiAgICAgICAgXSlcclxuICAgICAgXVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIOWfuuS6jiB2eGUtdGFibGUg6KGo5qC855qE5aKe5by65o+S5Lu277yM5o+Q5L6b5LiA5Lqb5bi455So55qE5riy5p+T5ZmoXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgVlhFVGFibGVQbHVnaW5SZW5kZXJlciA9IHtcclxuICBpbnN0YWxsICh4dGFibGU6IHR5cGVvZiBWWEVUYWJsZSkge1xyXG4gICAgeHRhYmxlLnJlbmRlcmVyLm1peGluKHJlbmRlck1hcClcclxuICB9XHJcbn1cclxuXHJcbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuVlhFVGFibGUpIHtcclxuICB3aW5kb3cuVlhFVGFibGUudXNlKFZYRVRhYmxlUGx1Z2luUmVuZGVyZXIpXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFZYRVRhYmxlUGx1Z2luUmVuZGVyZXJcclxuIiwiaW1wb3J0IFhFVXRpbHMgZnJvbSAneGUtdXRpbHMvY3Rvcic7XG4vKiBlc2xpbnQtZW5hYmxlIG5vLXVudXNlZC12YXJzICovXG4vKipcbiAqIOa4suafk+WHveaVsFxuICovXG5jb25zdCByZW5kZXJNYXAgPSB7XG4gICAgUHJvZ3Jlc3NCYXI6IHtcbiAgICAgICAgcmVuZGVyRGVmYXVsdChoLCByZW5kZXJPcHRzLCBwYXJhbXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgcm93LCBjb2x1bW4gfSA9IHBhcmFtcztcbiAgICAgICAgICAgIGNvbnN0IHsgcHJvcHMgPSB7fSB9ID0gcmVuZGVyT3B0cztcbiAgICAgICAgICAgIGNvbnN0IHsgbGluZVdpZHRoLCBsaW5lQ29sb3IsIGxpbmVCZ0NvbG9yIH0gPSBwcm9wcztcbiAgICAgICAgICAgIGNvbnN0IGNlbGxWYWx1ZSA9IE1hdGgubWluKDEwMCwgWEVVdGlscy50b051bWJlcihyb3dbY29sdW1uLnByb3BlcnR5XSkpO1xuICAgICAgICAgICAgbGV0IGxhYmVsUG9zaXRpb247XG4gICAgICAgICAgICBpZiAoY2VsbFZhbHVlIDwgMzApIHtcbiAgICAgICAgICAgICAgICBsYWJlbFBvc2l0aW9uID0gJ291dGVyJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNlbGxWYWx1ZSA+IDcwKSB7XG4gICAgICAgICAgICAgICAgbGFiZWxQb3NpdGlvbiA9ICdpbm5lcic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIGgoJ3NwYW4nLCB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzOiBbJ3Z4ZS1yZW5kZXJlci0tcHJvZ3Jlc3MtYmFyJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtgbGFiZWwtLSR7bGFiZWxQb3NpdGlvbn1gXTogbGFiZWxQb3NpdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGxpbmVCZ0NvbG9yXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCBbXG4gICAgICAgICAgICAgICAgICAgIGgoJ3NwYW4nLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzczogJ3Z4ZS1yZW5kZXJlci0tcHJvZ3Jlc3MtYmFyLWNoYXJ0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IGAke2NlbGxWYWx1ZX0lYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IFhFVXRpbHMuaXNOdW1iZXIobGluZVdpZHRoKSA/IGAke2xpbmVXaWR0aH1gIDogbGluZVdpZHRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogbGluZUNvbG9yXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICBoKCdzcGFuJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M6ICd2eGUtcmVuZGVyZXItLXByb2dyZXNzLWJhci1sYWJlbCdcbiAgICAgICAgICAgICAgICAgICAgfSwgYCR7Y2VsbFZhbHVlfSVgKVxuICAgICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBQcm9ncmVzc1Jpbmc6IHtcbiAgICAgICAgcmVuZGVyRGVmYXVsdChoLCByZW5kZXJPcHRzLCBwYXJhbXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgcm93LCBjb2x1bW4gfSA9IHBhcmFtcztcbiAgICAgICAgICAgIGNvbnN0IHsgcHJvcHMgPSB7fSB9ID0gcmVuZGVyT3B0cztcbiAgICAgICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCwgbGFiZWxDb2xvciwgbGluZUNvbG9yLCBsaW5lQmdDb2xvciwgaG9sbG93Q29sb3IgfSA9IHByb3BzO1xuICAgICAgICAgICAgY29uc3QgY2VsbFZhbHVlID0gTWF0aC5taW4oMTAwLCBYRVV0aWxzLnRvTnVtYmVyKHJvd1tjb2x1bW4ucHJvcGVydHldKSk7XG4gICAgICAgICAgICBsZXQgaGFsZlJpbmcgPSAwO1xuICAgICAgICAgICAgbGV0IG1hc2tSaW5nID0gMDtcbiAgICAgICAgICAgIGlmIChjZWxsVmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoY2VsbFZhbHVlID4gNTApIHtcbiAgICAgICAgICAgICAgICAgICAgaGFsZlJpbmcgPSBYRVV0aWxzLmZsb29yKChjZWxsVmFsdWUgLSA1MCkgKiAzLjYpO1xuICAgICAgICAgICAgICAgICAgICBtYXNrUmluZyA9IDE4MDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG1hc2tSaW5nID0gWEVVdGlscy5mbG9vcihjZWxsVmFsdWUgKiAzLjYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgaCgnc3BhbicsIHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3M6ICd2eGUtcmVuZGVyZXItLXByb2dyZXNzLXJpbmcnLFxuICAgICAgICAgICAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IFhFVXRpbHMuaXNOdW1iZXIod2lkdGgpID8gYCR7d2lkdGh9cHhgIDogd2lkdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IFhFVXRpbHMuaXNOdW1iZXIoaGVpZ2h0KSA/IGAke2hlaWdodH1weGAgOiBoZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGxpbmVCZ0NvbG9yXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCBbXG4gICAgICAgICAgICAgICAgICAgIGgoJ3NwYW4nLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzczogJ3Z4ZS1yZW5kZXJlci0tcHJvZ3Jlc3MtcmluZy1waWVjZS1wcmV2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBsaW5lQ29sb3JcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIGgoJ3NwYW4nLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzczogWyd2eGUtcmVuZGVyZXItLXByb2dyZXNzLXJpbmctcGllY2UtbmF4dCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2lzLS1oYWxmJzogaGFsZlJpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBsaW5lQ29sb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBgcm90YXRlKCR7aGFsZlJpbmd9ZGVnKWBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIGgoJ3NwYW4nLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzczogJ3Z4ZS1yZW5kZXJlci0tcHJvZ3Jlc3MtcmluZy1tYXNrJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBsaW5lQmdDb2xvcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IGByb3RhdGUoJHttYXNrUmluZ31kZWcpYFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgaCgnc3BhbicsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzOiAndnhlLXJlbmRlcmVyLS1wcm9ncmVzcy1yaW5nLWhvbGxvdycsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogaG9sbG93Q29sb3JcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIGgoJ3NwYW4nLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzczogJ3Z4ZS1yZW5kZXJlci0tcHJvZ3Jlc3MtcmluZy1sYWJlbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBsYWJlbENvbG9yXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sIGAke2NlbGxWYWx1ZX0lYClcbiAgICAgICAgICAgICAgICBdKVxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgIH1cbn07XG4vKipcbiAqIOWfuuS6jiB2eGUtdGFibGUg6KGo5qC855qE5aKe5by65o+S5Lu277yM5o+Q5L6b5LiA5Lqb5bi455So55qE5riy5p+T5ZmoXG4gKi9cbmV4cG9ydCBjb25zdCBWWEVUYWJsZVBsdWdpblJlbmRlcmVyID0ge1xuICAgIGluc3RhbGwoeHRhYmxlKSB7XG4gICAgICAgIHh0YWJsZS5yZW5kZXJlci5taXhpbihyZW5kZXJNYXApO1xuICAgIH1cbn07XG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LlZYRVRhYmxlKSB7XG4gICAgd2luZG93LlZYRVRhYmxlLnVzZShWWEVUYWJsZVBsdWdpblJlbmRlcmVyKTtcbn1cbmV4cG9ydCBkZWZhdWx0IFZYRVRhYmxlUGx1Z2luUmVuZGVyZXI7XG4iXX0=
