!function(e,t){if("function"==typeof define&&define.amd)define("vxe-table-plugin-textarea",["exports","xe-utils"],t);else if("undefined"!=typeof exports)t(exports,require("xe-utils"));else{var a={exports:{}};t(a.exports,e.XEUtils),e.VXETablePluginTextarea=a.exports.default}}(this,function(e,r){"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.VXETablePluginTextarea=void 0,r=(t=r)&&t.__esModule?t:{default:t};var f=document.createElement("span");f.className="x-textarea--resize";var a={XTextarea:{autofocus:".vxe-textarea",renderEdit:function(e,t,a){function r(e){setTimeout(function(){return function(e,t,a){var n=a.$table,o=a.column,r=o.renderWidth,i=o.renderHeight,l=e.target,s=l.parentNode.parentNode?l.parentNode.parentNode.parentNode:null,u=t.maxWidth||s.offsetWidth,c=t.maxHeight||400;f.textContent="".concat(l.value,"\n"),f.style.maxWidth="".concat(u,"px"),f.parentNode||n.$el.appendChild(f);var d=Math.max(i,f.offsetHeight+4);l.style.width="".concat(Math.min(u,Math.max(r,f.offsetWidth+20)),"px"),l.style.height="".concat(c<d?c:d,"px"),l.style.overflowY=u<d?"auto":""}(e,t,a)},0)}var i=a.$table,n=a.column,l=n.model;return[e("div",{class:"vxe-input--wrapper x-textarea",style:{height:"".concat(n.renderHeight-1,"px")}},[e("textarea",{class:"vxe-textarea",domProps:{value:l.value},on:{input:function(e){var t=e.target;l.update=!0,l.value=t.value},cut:r,paste:r,drop:r,focus:r,keydown:function(e){if(13!==e.keyCode||i.keyboardConfig&&!e.altKey)r(e);else{e.preventDefault(),e.stopPropagation();var t=e.target,a=function(e){var t={text:"",start:0,end:0};if(e.setSelectionRange)t.start=e.selectionStart,t.end=e.selectionEnd,t.text=t.start!==t.end?e.value.substring(t.start,t.end):"";else if(document.selection){var a=0,n=document.selection.createRange(),o=document.body.createTextRange();for(o.moveToElementText(e),t.text=n.text,t.bookmark=n.getBookmark();o.compareEndPoints("StartToStart",n)<0&&0!==n.moveStart("character",-1);a++)"\n"===e.value.charAt(a)&&a++;t.start=a,t.end=t.text.length+t.start}return t}(t),n=a.end,o=t.value;o="".concat(o.slice(0,n),"\n").concat(o.slice(n,o.length)),t.value=o,l.update=!0,l.value=o,setTimeout(function(){a.start=a.end=++n,function(e,t){if(e.setSelectionRange)e.focus(),e.setSelectionRange(t.start,t.end);else if(e.createTextRange){var a=e.createTextRange();e.value.length===t.start?a.collapse(!1):a.moveToBookmark(t.bookmark),a.select()}}(t,a),r(e)})}},compositionstart:r,compositionupdate:r,compositionend:r}})])]},renderCell:function(e,t,a){var n=a.row,o=a.column;return[e("span",{domProps:{innerHTML:r.default.escape(r.default.get(n,o.property)).replace(/\n/g,"<br>")}})]}}},n={install:function(e){e.renderer.mixin(a)}};e.VXETablePluginTextarea=n,"undefined"!=typeof window&&window.VXETable&&window.VXETable.use(n);var o=n;e.default=o});